<HTML>
<HEAD>

<TITLE>抽籤系統</TITLE>
	

	
</HEAD>	
	
<style>
	#input_20160628 {
  	float:left;
 	width: 50%;
 	margin-right: 2em;
	}
	#input_20160628 label {
  	display: block;
  	margin-top: 0.5em;
	}
	#input_20160628 div {
  	margin-top: 0.5em;
  	text-align: center;
	}
	#input_20160628 textarea {
  	width: 100%;
  	height: 20em;
	} 
		
	
</style>
	

	
	
	
	
<BODY>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	
<script>
	$(function () {
  $("#input_20160628 button.draw").click(function () {
    var _lines = $.trim($("#input_20160628 textarea").val()).split("\n");
    var _repeatable = ($('#input_20160628 [name="repeatable"]').length === 1);
    var _number = parseInt($('#input_20160628 [name="number"]').val());
    var _result = $("#result_20160628").empty();
    if (isNaN(_number)) {
        //alert("抽出數量必須為數字");
        _result.html("抽出數量必須為數字");
        return;
    }
    if (_lines.length === 1 && _lines[0] === "") {
        //alert("抽出數量必須為數字");
        _result.html("必須輸入資料");
        return;
    }

    var _list = [];
    for (var _i = 0; _i < _lines.length; _i++) {
        var _line = $.trim(_lines[_i]);
        if (_repeatable === true) {
            _list.push(_line);
        }
        else if ($.inArray(_line, _list) === -1) {
            _list.push(_line);
        }
    }
    
    if (_number > _list.length) {
      _number = _list.length;
    }

    // 抽出n位
    var _getRandomInt = function(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    var _result_index = [];
    _result.append('<div>抽籤結果(共'+_number+'位)：</div>');
    for (var _r = 0; _r < _number; _r++) {
        var _random_int = _getRandomInt(0, _list.length-1);
        if ($.inArray(_random_int, _result_index) === -1) {
            _result_index.push(_random_int);
            _result.append('<div>' + _list[_random_int] + '</div>');
        }
        else {
            _r--;
        }
    }
  });
  
  $("#input_20160628 button.default").click(function () {
    $("#input_20160628 textarea").val('明日之星\n正欣自助餐\n想初享廚\n鑫吉野自助餐\n玖零年代-燒臘便當專賣店\n泰國象 \n冰糖茶店\n八年得麻辣專賣店 \n韓聚食 \n愛這味 \n重慶酸辣粉 \n吉米特\nTHE PIZZA \n歐姆先生\n安東尼\n義維諾\n紅鬍子\n元珍食堂\n輔大豬排\n');
  });
});
	
</script>

	
	
<div id="input_20160628">
	<label>抽出數量: <input type="number" name="number" value="10" /></label>
 	<label><input type="checkbox" name="repeatable" /> 允許重複資料 </label>
 	<div><textarea></textarea></div>
  		<div class="div-button">
    			<button type="button" class="default">看看有哪些餐廳</button>
    			<button type="button" class="draw">抽籤</button>
  		</div>
	</div>
	<div id="result_20160628"></div>
	<div style="clear:both"></div>
	
</BODY>

</HTML>

	








	

